<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Website</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        #alert-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            color: white;
            font-weight: bold;
            position: relative;
        }

        .alert {
            display: none;
        }

        .notice {
            background-color: grey;
        }

        .warning {
            background-color: red;
        }

        .caution {
            background-color: yellow;
            color: black;
        }

        #alert-close {
            background: none;
            border: none;
            font-size: 16px;
            color: white;
            cursor: pointer;
        }

        #search-container {
            margin: 20px;
            position: relative;
        }

        #city-search {
            width: 100%;
            padding: 10px;
            font-size: 16px;
        }

        #suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 1px solid #ccc;
            z-index: 1000;
        }

        #suggestions div {
            padding: 10px;
            cursor: pointer;
        }

        #suggestions div:hover {
            background-color: #eee;
        }

        #weather-info {
            margin: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .weather-box {
            background-color: #ffffff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="alert-bar" class="alert notice">
        <span id="alert-message">Notice: This is a notice message (1/1)</span>
        <button id="alert-close">X</button>
    </div>

    <div id="search-container">
        <input type="text" id="city-search" placeholder="Enter a city..." autocomplete="off">
        <div id="suggestions"></div>
    </div>

    <div id="weather-info">
        <!-- Weather info will be dynamically inserted here -->
    </div>

    <script>
        let alertQueue = [
            { type: 'notice', message: 'Notice: This is a notice message (1/1)' },
            { type: 'warning', message: 'Warning: This is a warning message (1/2)' },
            { type: 'caution', message: 'Caution: This is a caution message (2/2)' }
        ];

        let currentAlertIndex = 0;

        function showAlert(index) {
            if (index >= alertQueue.length) return;
            const alert = alertQueue[index];
            const alertBar = document.getElementById('alert-bar');
            alertBar.className = `alert ${alert.type}`;
            document.getElementById('alert-message').innerText = alert.message;
            alertBar.style.display = 'flex';
        }

        document.getElementById('alert-close').addEventListener('click', () => {
            currentAlertIndex++;
            if (currentAlertIndex < alertQueue.length) {
                showAlert(currentAlertIndex);
            } else {
                document.getElementById('alert-bar').style.display = 'none';
            }
        });

        showAlert(currentAlertIndex);

        // Implementing city search with autocomplete
        document.getElementById('city-search').addEventListener('input', async function() {
            const query = this.value;
            if (query.length < 3) return;

            // Fetch city suggestions (using a free API like GeoDB Cities)
            const response = await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix=${query}&countryIds=US`, {
                method: 'GET',
                headers: {
                    'X-RapidAPI-Key': 'YOUR_RAPIDAPI_KEY',
                    'X-RapidAPI-Host': 'wft-geo-db.p.rapidapi.com'
                }
            });
            const data = await response.json();

            const suggestions = document.getElementById('suggestions');
            suggestions.innerHTML = '';
            data.data.forEach(city => {
                const div = document.createElement('div');
                div.textContent = `${city.city}, ${city.region}`;
                div.addEventListener('click', async function() {
                    document.getElementById('city-search').value = `${city.city}, ${city.region}`;
                    suggestions.innerHTML = '';

                    // Fetch weather data for the selected city using National Weather Service API
                    const weatherResponse = await fetch(`https://api.weather.gov/points/${city.latitude},${city.longitude}`);
                    const weatherData = await weatherResponse.json();
                    const forecastUrl = weatherData.properties.forecast;
                    const forecastResponse = await fetch(forecastUrl);
                    const forecastData = await forecastResponse.json();

                    displayWeatherInfo(forecastData);
                });
                suggestions.appendChild(div);
            });
        });

        function displayWeatherInfo(data) {
            const weatherInfo = document.getElementById('weather-info');
            weatherInfo.innerHTML = `
                <div class="weather-box">Temperature: ${data.properties.periods[0].temperature}Â°${data.properties.periods[0].temperatureUnit}</div>
                <div class="weather-box">Wind Speed: ${data.properties.periods[0].windSpeed}</div>
                <div class="weather-box">Short Forecast: ${data.properties.periods[0].shortForecast}</div>
            `;
        }
    </script>
</body>
</html>
